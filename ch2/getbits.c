/* getbits: pの位置からnビットを取ってくる */

unsigned getbits(unsigned x, int p, int n)
{
  return (x >> (p+1-n)) & ~(~0 << n);
  /*
   *  x >> (p+1-n) : 目的のフィールドは語の右端に動かされる
   *  ~0  : すべてのビットが1になる
   *  ~0 << n : nbit左シフトすると、右側のnビットには0が置かれる
   *            それを~で補数にすると、右側nビットが1であるマスクが出来上がる
   */
}
